(function(){"use strict";var e={66697:function(e,t,a){var r=a(22856),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("PullRequest")],1),t("el-col",{attrs:{span:12}},[t("ScheduledTask")],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("RpcTask")],1),t("el-col",{attrs:{span:12}},[t("SerializationTask")],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("TraceDetail")],1)],1)],1)},l=[],i=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"PullRequest"}})])}],n=(a(44114),{name:"PullRequest",mounted(){this.myEcharts()},methods:{myEcharts(){const e=this.$echarts.init(document.getElementById("PullRequest"));let t,a;this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/pr/merged_results.json",success:function(e){t=e}});try{a=JSON.parse(t)}catch(n){return void console.error("解析JMH结果字符串出错：",n)}let r=a.filter((e=>"avgt"===e.mode)).reduce(((e,t)=>{let{time:a,serialization:r,protocol:s}=t.params,l={time:Number(a),score:Math.round(t.primaryMetric.score),serialization:r,protocol:s},i=s+"-"+r;return e[i]||(e[i]=[]),e[i].push(l),e}),{}),s={};function l(e){var t=new Date(e);return t.toLocaleDateString("en-US")+" "+t.toLocaleTimeString("en-US")}Object.entries(r).forEach((([e,t])=>{let a=t.sort(((e,t)=>e.time-t.time));s[e]={time:a.map((e=>e.time)),score:a.map((e=>e.score))}}));let i=Object.keys(s).map((e=>{let t=s[e].time.map(((t,a)=>({name:l(t),value:[t,s[e].score[a]]})));return{name:e,type:"line",showSymbol:!0,hoverAnimation:!1,symbolSize:10,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]},data:t}})),o={title:{text:"PR情况",x:"center"},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].axisValueLabel+"<br/>";return e.forEach((e=>{t+=e.marker+" "+(null!==e.data.value[1]?e.data.value[1]:"-")+"ms<br/>"})),t}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"time",boundaryGap:!1},yAxis:{type:"value",name:"耗时(ms)"},series:i};e.setOption(o)}}}),c=n,u=a(81656),p=(0,u.A)(c,i,o,!1,null,"6b5dee22",null),d=p.exports,h=function(){var e=this;e._self._c;return e._m(0)},m=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"ScheduledTask"}})])}],b={name:"ScheduledTask",mounted(){this.myEcharts()},methods:{myEcharts(){const e=this.$echarts.init(document.getElementById("ScheduledTask"));let t,a;this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/scheduled/merged_results.json",success:function(e){t=e}});try{a=JSON.parse(t)}catch(n){return void console.error("解析JMH结果字符串出错：",n)}let r=a.filter((e=>"avgt"===e.mode)).reduce(((e,t)=>{let{time:a,serialization:r,protocol:s}=t.params,l={time:Number(a),score:Math.round(t.primaryMetric.score),serialization:r,protocol:s},i=s+"-"+r;return e[i]||(e[i]=[]),e[i].push(l),e}),{}),s={};function l(e){var t=new Date(e);return t.toLocaleDateString("en-US")+" "+t.toLocaleTimeString("en-US")}Object.entries(r).forEach((([e,t])=>{let a=t.sort(((e,t)=>e.time-t.time));s[e]={time:a.map((e=>e.time)),score:a.map((e=>e.score))}}));let i=Object.keys(s).map((e=>{let t=s[e].time.map(((t,a)=>({name:l(t),value:[t,s[e].score[a]]})));return{name:e,type:"line",showSymbol:!0,hoverAnimation:!1,symbolSize:10,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]},data:t}})),o={title:{text:"Schedule情况",x:"center"},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].axisValueLabel+"<br/>";return e.forEach((e=>{t+=e.marker+" "+(null!==e.data.value[1]?e.data.value[1]:"-")+"ms<br/>"})),t}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"time",boundaryGap:!1},yAxis:{type:"value",name:"耗时(ms)"},series:i};e.setOption(o)}}},f=b,v=(0,u.A)(f,h,m,!1,null,"15822182",null),y=v.exports,g=function(){var e=this,t=e._self._c;return t("div",[t("el-cascader",{attrs:{"show-all-levels":!1,props:e.props,options:e.cascaderOptions,clearable:""},on:{change:e.handleCascaderChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-header",[t("h1",[e._v(e._s(e.leftTableTitle))])]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.leftTableDate,"row-key":"spanId_",border:"",lazy:"","default-expand-all":"","tree-props":{children:"children"}}},[t("el-table-column",{attrs:{prop:"operationName_",label:"方法名","min-width":"90%"}}),t("el-table-column",{attrs:{prop:"cost",label:"耗时（ms）","min-width":"10%"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-header",[t("h1",[e._v(e._s(e.rightTableTitle))])]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightTableDate,"row-key":"spanId_",border:"",lazy:"","default-expand-all":"","tree-props":{children:"children"}}},[t("el-table-column",{attrs:{prop:"operationName_",label:"方法名","min-width":"90%"}}),t("el-table-column",{attrs:{prop:"cost",label:"耗时（ms）","min-width":"10%"}})],1)],1)],1)],1)},T=[],x={name:"TraceDetail",data(){return{rpcTable:[],serializationTable:[],leftTableTitle:"",leftTableDate:[],rightTableDate:[],rightTableTitle:"",selectedOptions:[],disabledRoots:[],disabledChildren:[],props:{multiple:!0},cascaderOptions:[{value:"rpc",label:"RPC 协议",children:[{value:"dubbo",label:"Dubbo协议"},{value:"rmi",label:"Rmi协议"},{value:"tri",label:"Triple协议"}]},{value:"serialization",label:"序列化",children:[{value:"hessian2",label:"Hessian2"},{value:"fastjson2",label:"Fastjson2"},{value:"fastjson",label:"Fastjson"},{value:"avro",label:"Avro"},{value:"fst",label:"Fst"},{value:"gson",label:"Gson"},{value:"kryo",label:"Kryo"},{value:"msgpack",label:"Msgpack"}]}],tmpCascaderOptions:[{value:"rpc",label:"RPC 协议",children:[{value:"dubbo",label:"Dubbo协议"},{value:"rmi",label:"Rmi协议"},{value:"tri",label:"Triple协议"}]},{value:"serialization",label:"序列化",children:[{value:"hessian2",label:"Hessian2"},{value:"fastjson2",label:"Fastjson2"},{value:"fastjson",label:"Fastjson"},{value:"avro",label:"Avro"},{value:"fst",label:"Fst"},{value:"gson",label:"Gson"},{value:"kryo",label:"Kryo"},{value:"msgpack",label:"Msgpack"}]}]}},mounted(){this.initTable()},methods:{initTable(){let e,t;this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/fixed/rpc/merged_prop_traces.json",success:function(t){e=t}});try{this.rpcTable=JSON.parse(e),console.log("this.rpcTable",this.rpcTable)}catch(a){console.error("解析JMH结果字符串出错：",a)}this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/fixed/serialization/merged_prop_traces.json",success:function(e){t=e}});try{this.serializationTable=JSON.parse(t),console.log("this.serializationResultList",this.serializationTable)}catch(a){console.error("解析JMH结果字符串出错：",a)}},createSpanTree(e){console.log(e);let t=new Map,a=[];for(let r of e)t.set(r.spanId_,{...r,spanId_:r.spanId_.toString(),cost:r.endTime_-r.startTime_,children:[]}),-1===r.parentSpanId_&&a.push(t.get(r.spanId_));for(let r of e)if(-1!==r.parentSpanId_){let e=t.get(r.parentSpanId_);e&&e.children.push(t.get(r.spanId_))}return console.log(a),a},handleCascaderChange(e){let t;if(console.log("this.value",e),console.log("this.selectedOptions",this.selectedOptions),this.cascaderOptions=this.deepCopy2DArray(this.tmpCascaderOptions),null!=e&&e.length>0&&(t=this.cascaderOptions.find((t=>t.value===e[0][0]))),t)if(this.disabledRoots=this.cascaderOptions.filter((e=>e.value!==t.value)).map((e=>e.value)),e.length>2){this.selectedOptions.splice(2),e=this.selectedOptions;let a=e.map((e=>e[1]));this.disabledChildren=t.children.filter(((e,t)=>t>=2&&!a.includes(e.value))).map((e=>e.value))}else if(2===e.length){let a=e.map((e=>e[1]));this.disabledChildren=t.children.filter((e=>!a.includes(e.value))).map((e=>e.value))}else this.disabledChildren=[];else this.disabledRoots=[],this.disabledChildren=[];this.updateCascaderOptions(t),this.updateTable()},updateCascaderOptions(e){e&&(e.children=e.children.map((e=>({...e,disabled:this.disabledChildren.includes(e.value)})))),this.cascaderOptions=this.cascaderOptions.map((e=>({...e,disabled:this.disabledRoots.includes(e.value)})))},deepCopy2DArray(e){return JSON.parse(JSON.stringify(e))},updateTable(){if(null==this.selectedOptions||0===this.selectedOptions.length)return this.leftTableDate=[],this.rightTableDate=[],this.leftTableTitle="",void(this.rightTableTitle="");let e=this.selectedOptions[0][0],t=this.selectedOptions.map((e=>e[1]));if("rpc"===e){let e=this.rpcTable.find((e=>t[0]===e["dubbo.protocol.name"])),a=this.rpcTable.find((e=>t[1]===e["dubbo.protocol.name"]));this.leftTableDate=e?this.createSpanTree(e.spans_):[],this.rightTableDate=a?this.createSpanTree(a.spans_):[],this.leftTableTitle=e?e["dubbo.protocol.name"]:"",this.rightTableTitle=a?a["dubbo.protocol.name"]:""}if("serialization"===e){let e=this.serializationTable.find((e=>t[0]===e["dubbo.protocol.serialization"])),a=this.serializationTable.find((e=>t[1]===e["dubbo.protocol.serialization"]));this.leftTableDate=e?this.createSpanTree(e.spans_):[],this.rightTableDate=a?this.createSpanTree(a.spans_):[],this.leftTableTitle=e?e["dubbo.protocol.serialization"]:"",this.rightTableTitle=a?a["dubbo.protocol.serialization"]:""}}}},_=x,S=(0,u.A)(_,g,T,!1,null,"90a84e78",null),O=S.exports,w=function(){var e=this;e._self._c;return e._m(0)},k=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"RpcTask"}})])}],j={name:"RpcTask",mounted(){this.myEcharts()},methods:{myEcharts(){const e=this.$echarts.init(document.getElementById("RpcTask"));let t,a;this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/fixed/rpc/merged_prop_results.json",success:function(e){t=e}});try{a=JSON.parse(t)}catch(l){console.error("解析JMH结果字符串出错：",l)}let r=a.filter((e=>"avgt"===e.mode)).map((e=>{let t=e.params["dubbo.protocol.name"];return{score:Math.round(e.primaryMetric.score),protocol:t}})),s={title:{text:"RPC对比",x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(e){return e[0].data.score+"ms"}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category"},yAxis:{type:"value",name:"耗时(ms)"},dataset:{dimensions:["protocol","score"],source:r},series:[{type:"bar",label:{show:!0,position:"top",textStyle:{fontSize:"30px",color:"#666"}}}]};e.setOption(s)}}},z=j,A=(0,u.A)(z,w,k,!1,null,"dd7a79f4",null),M=A.exports,E=function(){var e=this;e._self._c;return e._m(0)},R=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"SerializationTask"}})])}],C={name:"SerializationTask",mounted(){this.myEcharts()},methods:{myEcharts(){const e=this.$echarts.init(document.getElementById("SerializationTask"));let t,a;this.$.ajax({type:"GET",async:!1,url:"https://raw.githubusercontent.com/wxbty/jmh_result/main/test-results/fixed/serialization/merged_prop_results.json",success:function(e){t=e}});try{a=JSON.parse(t)}catch(l){console.error("解析JMH结果字符串出错：",l)}let r=a.filter((e=>"avgt"===e.mode)).map((e=>{let t=e.params["dubbo.protocol.serialization"];return{score:Math.round(e.primaryMetric.score),protocol:t}})),s={title:{text:"Serialization对比",x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(e){return e[0].data.score+"ms"}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category"},yAxis:{type:"value",name:"耗时(ms)"},dataset:{dimensions:["protocol","score"],source:r},series:[{type:"bar",label:{show:!0,position:"top",textStyle:{fontSize:"30px",color:"#666"}}}]};e.setOption(s)}}},D=C,I=(0,u.A)(D,E,R,!1,null,"3e1f2d66",null),P=I.exports;const J=(e,t)=>{let a=null;return function(){let r=this,s=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(r,s)}),t)}},L=window.ResizeObserver;window.ResizeObserver=class extends L{constructor(e){e=J(e,16),super(e)}};var $={name:"App",components:{SerializationTask:P,RpcTask:M,TraceDetail:O,ScheduledTask:y,PullRequest:d}},N=$,G=(0,u.A)(N,s,l,!1,null,null,null),H=G.exports,F=a(74927),q=a.n(F),B=a(86724),U=a.n(B),K=a(50755),V=a.n(K);r["default"].prototype.$=V(),r["default"].prototype.$echarts=U(),r["default"].use(q()),r["default"].config.productionTip=!1,new r["default"]({render:e=>e(H)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,l){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],l=e[u][2];for(var o=!0,n=0;n<r.length;n++)(!1&l||i>=l)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(o=!1,l<i&&(i=l));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,s,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,l,i=r[0],o=r[1],n=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(n)var u=n(a)}for(t&&t(r);c<i.length;c++)l=i[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},r=self["webpackChunkdubbo_benchmark"]=self["webpackChunkdubbo_benchmark"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(66697)}));r=a.O(r)})();
//# sourceMappingURL=app.7bdef298.js.map